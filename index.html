<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script src="plotly-latest.min.js"></script>

<title>Experiment 1 - Drag coefficents</title>
<meta charset="utf-8">
<meta name="viewport" content="width=620">
<style>
	body {background-color:#ffffff; font-family:Arial, sans-serif; font-size:14px;
					text-align:center;}						/* gray background, center everything */
	p {margin-left:auto; margin-right:auto; width:600px;}	/* keep paragraphs narrow and centered */
	input {font-size:115%;}									/* make buttons bigger */	
	li {text-align:left;}
</style>
<style type="text/css"></style></head>

<body>

<h2>Experiment-1: Drag</h2>

<p>By Matthew Aitchison</p> 

<canvas id="theCanvas" width="600" height="240">This application runs only in modern
browsers. For best results, use Google Chrome.</canvas>

<div>
	<input id="resetFluidButton" type="button" onclick="initFluid()" value="Reset">	    
	<input id="startButton" type="button" onclick="startStop()" value="Start">
    <input id="plotButton" type="button" onclick="plotPoint()" value="Plot">
</div>
<div>
    
    <input id="speedSlider" 
        type="range" min="0" max="0.50" step="0.02" value="0.10" onchange="_adjustSpeed()"
        style="width: 300px"
    >
    Fluid speed: <span id="speedValue">0.100</span>     
</div>
<div>
Force (drag): <span id="dragLabel">...</span> 
FPS: <span id="fpsLabel">...</span> 
</div>
<p style="text-align:left">
In this experiment we will test the effects of drag on an object under various conditions.


<div id="tester" style="width:600px;height:250px;"></div>

<script src="./Fluid Dynamics Simulation_files/barrierdata.js"></script>
<script src="lattice_boltzmann.js"></script>   

<!-- Just an interface to the lattice_boltzmann settings -->
<script>

    // globals to our UI controls
    var speedLabel = document.getElementById('speedValue');
    var speedSlider = document.getElementById('speedSlider');	
    
    ui.dragLabel = document.getElementById('dragLabel');	
    ui.fpsLabel = document.getElementById('fpsLabel');	
    
    _adjustSpeed()
    
    var results = []

    // Plot current drag on graph
    function plotPoint() {
        var Fx = barrierFx;
        var Fy = barrierFy;
        drag_force =  Math.sqrt(Fx*Fx + Fy*Fy).toFixed(3);
        fluid_speed = speedSlider.value
        
        results[fluid_speed] = drag_force
        drawPlot()
    }
    
    function drawPlot() {
        TESTER = document.getElementById('tester');
        
        console.log(results)
        
        var _x = []
        var _y = []

        for (var index in results) {            
            _x.push(index)
            _y.push(results[index])            
        }
            
        Plotly.plot( TESTER, [{
        x: _x,
        y: _y, }], {        
        margin: { t: 0 } } );
    }
    
    // Show value of flow speed setting:
    function _adjustSpeed() {
        config.speed = Number(speedSlider.value)
        speedLabel.innerHTML = Number(config.speed).toFixed(3);        
    }
                 

</script>

</body></html>